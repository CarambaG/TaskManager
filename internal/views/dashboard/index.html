<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Task Manager - –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</title>
    <link rel="stylesheet" href="/static/dashboard/style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
<div class="container">
    <header>
        <div class="header-content">
            <h1>Task Manager</h1>
            <div class="user-info">
                <span id="userGreeting">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!</span>
                <button onclick="logout()" class="logout-btn">–í—ã–π—Ç–∏</button>
            </div>
        </div>
    </header>

    <div class="dashboard-container">
        <!-- –ë–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å -->
        <aside class="sidebar">
            <div class="user-card">
                <div class="avatar">
                    <span id="userInitials">U</span>
                </div>
                <h3 id="userLogin">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</h3>
                <p id="userSince">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω: </p>
            </div>

            <nav class="nav-menu">
                <button class="nav-btn active" onclick="showSection('tasks')">
                    üìã –ú–æ–∏ –∑–∞–¥–∞—á–∏
                </button>
                <button class="nav-btn" onclick="showSection('profile')">
                    üë§ –ü—Ä–æ—Ñ–∏–ª—å
                </button>
                <button class="nav-btn" onclick="showSection('stats')">
                    üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
                </button>
            </nav>
        </aside>

        <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
        <main class="main-content">
            <!-- –°–µ–∫—Ü–∏—è –∑–∞–¥–∞—á -->
            <section id="tasks-section" class="content-section active">
                <div class="section-header">
                    <h2>–ú–æ–∏ –∑–∞–¥–∞—á–∏</h2>
                    <button class="btn-primary" onclick="resetAndOpenTaskModal()">
                        + –ù–æ–≤–∞—è –∑–∞–¥–∞—á–∞
                    </button>
                </div>

                <div class="tasks-controls">
                    <div class="filter-group">
                        <button class="filter-btn active" data-filter="all">–í—Å–µ</button>
                        <button class="filter-btn" data-filter="active">–ê–∫—Ç–∏–≤–Ω—ã–µ</button>
                        <button class="filter-btn" data-filter="completed">–í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ</button>
                    </div>
                    <div class="search-box">
                        <input type="text" id="taskSearch" placeholder="–ü–æ–∏—Å–∫ –∑–∞–¥–∞—á...">
                    </div>
                </div>

                <div class="tasks-list" id="tasksList">
                    <div class="empty-state">
                        <p>–ó–∞–¥–∞—á–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç</p>
                        <button class="btn-primary" onclick="resetAndOpenTaskModal()">
                            –°–æ–∑–¥–∞—Ç—å –ø–µ—Ä–≤—É—é –∑–∞–¥–∞—á—É
                        </button>
                    </div>
                </div>

                <!-- –ü–∞–≥–∏–Ω–∞—Ü–∏—è -->
                <div class="pagination-container" id="paginationContainer" style="display: none;">
                    <div class="pagination">
                        <button id="prevPage" class="pagination-btn" onclick="changePage(currentPage - 1)">
                            ‚Äπ –ù–∞–∑–∞–¥
                        </button>
                        <div class="page-numbers" id="pageNumbers"></div>
                        <button id="nextPage" class="pagination-btn" onclick="changePage(currentPage + 1)">
                            –í–ø–µ—Ä–µ–¥ ‚Ä∫
                        </button>
                    </div>
                    <div class="pagination-info">
                        –ü–æ–∫–∞–∑–∞–Ω–æ <span id="tasksShown">0</span> –∏–∑ <span id="tasksTotal">0</span> –∑–∞–¥–∞—á
                    </div>
                </div>
            </section>

            <!-- –°–µ–∫—Ü–∏—è –ø—Ä–æ—Ñ–∏–ª—è -->
            <section id="profile-section" class="content-section">
                <div class="section-header">
                    <h2>–ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</h2>
                </div>

                <div class="profile-info">
                    <div class="info-card">
                        <h3>–û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h3>
                        <div class="info-item">
                            <label>–õ–æ–≥–∏–Ω:</label>
                            <span id="profileLogin"></span>
                        </div>
                        <div class="info-item">
                            <label>–î–∞—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏:</label>
                            <span id="profileCreateDate"></span>
                        </div>
                        <div class="info-item">
                            <label>Email:</label>
                            <span id="profileEmail">–ù–µ —É–∫–∞–∑–∞–Ω</span>
                        </div>
                    </div>

                    <div class="info-card">
                        <h3>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h3>
                        <div class="info-item">
                            <label>–í—Å–µ–≥–æ –∑–∞–¥–∞—á:</label>
                            <span id="totalTasks">0</span>
                        </div>
                        <div class="info-item">
                            <label>–ê–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–¥–∞—á:</label>
                            <span id="activeTasks">0</span>
                        </div>
                        <div class="info-item">
                            <label>–í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö –∑–∞–¥–∞—á:</label>
                            <span id="completedTasks">0</span>
                        </div>
                    </div>
                </div>

                <div class="info-card">
                    <h3>–°–º–µ–Ω–∞ –ø–∞—Ä–æ–ª—è</h3>
                    <form id="changePasswordForm">
                        <div class="form-group">
                            <label for="currentPassword">–¢–µ–∫—É—â–∏–π –ø–∞—Ä–æ–ª—å</label>
                            <input type="password" id="currentPassword" required>
                        </div>
                        <div class="form-group">
                            <label for="newPassword">–ù–æ–≤—ã–π –ø–∞—Ä–æ–ª—å</label>
                            <input type="password" id="newPassword" required minlength="6">
                        </div>
                        <div class="form-group">
                            <label for="confirmPassword">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –Ω–æ–≤—ã–π –ø–∞—Ä–æ–ª—å</label>
                            <input type="password" id="confirmPassword" required minlength="6">
                        </div>
                        <button type="submit" class="btn-primary">–°–º–µ–Ω–∏—Ç—å –ø–∞—Ä–æ–ª—å</button>
                    </form>
                </div>

                <div class="info-card">
                    <h3>–°–º–µ–Ω–∞ email</h3>
                    <form id="changeEmailForm">
                        <div class="form-group">
                            <label for="newEmail">–ù–æ–≤—ã–π email</label>
                            <input type="email" id="newEmail" required>
                        </div>
                        <div class="form-group">
                            <label for="emailPassword">–¢–µ–∫—É—â–∏–π –ø–∞—Ä–æ–ª—å</label>
                            <input type="password" id="emailPassword" required>
                        </div>
                        <button type="submit" class="btn-primary">–°–º–µ–Ω–∏—Ç—å email</button>
                    </form>
                </div>
            </section>

            <!-- –°–µ–∫—Ü–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ -->
            <section id="stats-section" class="content-section">
                <div class="section-header">
                    <h2>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h2>
                </div>

                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon">üìä</div>
                        <div class="stat-value" id="statTotalTasks">0</div>
                        <div class="stat-label">–í—Å–µ–≥–æ –∑–∞–¥–∞—á</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">‚è≥</div>
                        <div class="stat-value" id="statPendingTasks">0</div>
                        <div class="stat-label">–í –ø—Ä–æ—Ü–µ—Å—Å–µ</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">‚úÖ</div>
                        <div class="stat-value" id="statCompletedTasks">0</div>
                        <div class="stat-label">–í—ã–ø–æ–ª–Ω–µ–Ω–æ</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üìÖ</div>
                        <div class="stat-value" id="statTodayTasks">0</div>
                        <div class="stat-label">–°–µ–≥–æ–¥–Ω—è</div>
                    </div>
                </div>

                <div class="chart-container">
                    <h3>–ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø–æ –¥–Ω—è–º</h3>
                    <div class="chart-wrapper">
                        <canvas id="productivityChart"></canvas>
                    </div>
                </div>

                <div class="chart-container">
                    <h3>–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞–º</h3>
                    <div class="chart-wrapper">
                        <canvas id="priorityChart"></canvas>
                    </div>
                </div>
            </section>
        </main>
    </div>
</div>

<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–¥–∞—á–∏ -->
<div id="taskModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h3>–ù–æ–≤–∞—è –∑–∞–¥–∞—á–∞</h3>
            <button class="close-btn" onclick="closeTaskModal()">&times;</button>
        </div>
        <form id="taskForm">
            <div class="form-group">
                <label for="taskTitle">–ù–∞–∑–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏ *</label>
                <input type="text" id="taskTitle" required>
            </div>
            <div class="form-group">
                <label for="taskDescription">–û–ø–∏—Å–∞–Ω–∏–µ</label>
                <textarea id="taskDescription" rows="3"></textarea>
            </div>
            <div class="form-group">
                <label for="taskPriority">–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç</label>
                <select id="taskPriority">
                    <option value="low">–ù–∏–∑–∫–∏–π</option>
                    <option value="medium" selected>–°—Ä–µ–¥–Ω–∏–π</option>
                    <option value="high">–í—ã—Å–æ–∫–∏–π</option>
                </select>
            </div>
            <div class="form-group">
                <label for="taskDueDate">–°—Ä–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è</label>
                <input type="date" id="taskDueDate">
            </div>
            <div class="form-actions">
                <button type="button" onclick="closeTaskModal()">–û—Ç–º–µ–Ω–∞</button>
                <button type="submit">–°–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É</button>
            </div>
        </form>
    </div>
</div>

<script src="/static/dashboard/script.js"></script>
</body>
</html>